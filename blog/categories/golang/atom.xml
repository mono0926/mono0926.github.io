<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: golang | monoHub]]></title>
  <link href="http://mono0926.github.io/blog/categories/golang/atom.xml" rel="self"/>
  <link href="http://mono0926.github.io/"/>
  <updated>2015-04-25T15:47:40+09:00</updated>
  <id>http://mono0926.github.io/</id>
  <author>
    <name><![CDATA[Masayuki Ono]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[クックパッド第5回 開発コンテスト24に参戦した話]]></title>
    <link href="http://mono0926.github.io/blog/2014/10/20/cookpad/"/>
    <updated>2014-10-20T12:30:00+09:00</updated>
    <id>http://mono0926.github.io/blog/2014/10/20/cookpad</id>
    <content type="html"><![CDATA[<p>先日も<a href="http://isucon.net/">ISUCONコンテスト予選</a>に出たばかりですが、土日(10月18-19日)に
<a href="https://info.cookpad.com/24contest_5">クックパッドの「第5回 開発コンテスト24」</a>に参戦しました。</p>

<p><a href="http://kinen.yabuchin.com/">勝手にアニバーサリー ～なんでもない日を、あの人との記念日に。～</a>が成果物です。
ちなみに、タイトルは僕が初め適当に提案したのが意外と良かったらしくそのまま採用されました（｀・ω・´）</p>

<h2>メンバー</h2>

<p>こんな感じのバランスの良いメンバーが集まりました(　´･‿･｀)</p>

<ul>
<li><a href="https://www.facebook.com/mono0926">僕</a>

<ul>
<li>iOSアプリか適当なGoコード書く予定 (結果Goコード書いてた)</li>
</ul>
</li>
<li><a href="https://www.facebook.com/yuichi.yabu">やぶさん</a>

<ul>
<li>サーバーサイド(普段Scala使ってるけど、今回はGo)</li>
</ul>
</li>
<li><a href="https://www.facebook.com/sayaka.yabu.7">の奥さん</a>

<ul>
<li><a href="http://www.nssol.nssmc.com/press/2014/20141009_110001.html">Data Veraci</a>を作った方 (前職の先輩)</li>
</ul>
</li>
<li><a href="https://www.facebook.com/3is.sheep">ひつじさん</a>

<ul>
<li>yah○○のデザイナーさん</li>
</ul>
</li>
<li><a href="https://www.facebook.com/nozomi.fuzimoto">のんたん☆</a>

<ul>
<li>恵比寿のデザイナーさん</li>
</ul>
</li>
</ul>


<p>僕が平均年齢くらいの華やかなメンバーでした。</p>

<h2>当日まで</h2>

<!-- more -->


<ul>
<li>レポジトリ作成: <a href="https://github.com/SYM-CONTEST/Cookpad2014">SYM-CONTEST/Cookpad2014</a></li>
<li>Facebookイベント作成: <a href="https://www.facebook.com/events/718375174865939/">クックパッド 第5回 開発コンテスト24</a></li>
<li>Slack用意

<ul>
<li>自宅警備もする必要があるので、オンライン上でやりとりして開発</li>
</ul>
</li>
<li>yah○○のBASE6で打ち合わせ(ひつじさんからのご招待)

<ul>
<li>ここで<a href="https://www.facebook.com/nozomi.fuzimoto">のんたん☆</a>の参戦決定（｀・ω・´）</li>
</ul>
</li>
</ul>


<p><img src="/images/post/base6_1.jpg" alt="" />
<img src="/images/post/base6_2.jpg" alt="" />
<img src="/images/post/base6_3.jpg" alt="" />
<img src="/images/post/base6_4.jpg" alt="" /></p>

<h2>当日</h2>

<p>去年も<a href="http://about.me/yomei">余命チェッカー</a>で参戦してたので、大体勝手は分かっていました。</p>

<h3>朝9時</h3>

<p><a href="https://info.cookpad.com/24contest_5">クックパッドの「第5回 開発コンテスト24」</a>をリロードして、お題が「誰かと話すキッカケを作るサービス」であることを把握。</p>

<p>元々、10時までに作るネタが決まらなかったら解散というオレオレレギュレーションをやっていたので、時間を気にしつつネタ出し。<br/>
けっこう良いアイディアが出るものの、コンテスト受けしそうか微妙な感じで、なかなか収束せず。<br/>
雰囲気的に10時過ぎてもそのまま続行することにして、最低午前中にという感じで結果、過去に何かつながりがあってご無沙汰な人間関係を、勝手に記念日をでっちあげて祝うことで結びつけるサービスになりました。</p>

<p>具体的には、Twitterで過去に絡んだ人たちに、そのやり取りのキーワードを抽出して○○記念日のメッセージを投げるみたいな。
(Twitterに限らずもっと膨らませたかったけど、実装コストの兼ね合いもあり)</p>

<h3>1日目昼</h3>

<p>作るものが決まったので、もう少し仕様や画面を詰めるような相談をしたり、出来るところは実装始めたり。</p>

<h4>やぶさん達はいつの間にかお寿司屋さん行ってました（´・д・｀）</h4>

<p>僕は不慣れなGo言語での以下の2点の実装法を手短に調べて、うんいけそうみたいな感触を得ました。</p>

<ul>
<li>Twitter認証

<ul>
<li><a href="https://github.com/mrjones/oauth">mrjones/oauth</a>採用</li>
</ul>
</li>
<li>Twitter APIで過去のやり取りを取得

<ul>
<li><a href="https://github.com/ChimeraCoder/anaconda">ChimeraCoder/anaconda</a>採用</li>
</ul>
</li>
</ul>


<p>そんなこんなで、Googleハングアウト使いながら、みんなで色々お話しつつ作業。</p>

<p>夕方くらいに、それぞれ私用・仕事・昼寝などで散らばってしまいました（´・ω・｀）</p>

<p>僕はキャラクター <a href="https://twitter.com/kinenn_bi">アニバちゃんのTwitterアカウント</a>作って遊んだりしてました(　´･‿･｀)</p>

<h3>1日目夜</h3>

<p>夜になると、またみんな戻ってきて、僕も黙々と実装。<br/>
Twitter認証周りはやぶさんにお願いして、僕は過去のやり取りを取得して良い感じの記念日を作るところをガリガリGoで書いていました。</p>

<h3>深夜</h3>

<p>引き続きみんなゴリゴリ実装したりデザイン作ったり。</p>

<p>2時くらいに、やぶさん実装とのインターフェース決めて、1時間くらいそのあたり仕上げて寝ました(一番乗り)。</p>

<p>寝る間際に<a href="https://twitter.com/kinenn_bi">アニバちゃん</a>で置き土産残したら、ひどいことになったようです(　´･‿･｀)</p>

<p><img src="/images/post/misawa.png" alt="" /></p>

<h3>2日目朝</h3>

<p>7時くらいに起きました。<br/>
やぶさん(完徹)以外は皆寝てました。<br/>
やぶさんは一部うまく行かないところあって泣きそうでした。</p>

<p>僕の実装の問題もあったり、結合後のテストでバグ出たところの対応したり。<br/>
あと、記念日抽出ロジックの改良などして、ギリギリ9時くらいに収束。</p>

<p>Goは基本的に型セーフで変更がしやすかったです。</p>

<p>30分くらい前にフォームの入力し始めるドタバタ感がありつつ、無事に応募完了。</p>

<h3>9時の提出後のドタバタ</h3>

<p>なんかよく落ちるみたいな問題があって、対応。
特に、僕が<code>log.Fatalln</code>しちゃってたのがインパクト大きかった模様。</p>

<p>開発時はこれで良かったかもだけど、リリースしたので、取り急ぎ<code>log.Println</code>に変更。
error出たときのハンドリングとして統一的にやっていたので、対応は一瞬でした。
(<code>log.Println</code>がこの文脈で適切かはよく分からなかったがとりあえず落とさないように)</p>

<p>あと一部例外系に対応したりして、けっこう安定。</p>

<p>と思いきや、まだ1箇所認証周りで落ちるところがあとで発覚して、あまり深く調べず今でもまだ直ってません（´・ω・｀）</p>

<h3>結果</h3>

<p>2日目夕方くらいに発表されましたが、入選ならずで残念でした。<br/>
ちょくちょくサービスダウンしてて不安定だったのが響いたかも（´-ω-｀）<br/>
皆さん(特にやぶさん)、お疲れさまでした。<br/>
つらたんでしたが、楽しかったです、Goの勉強にもなったし(　´･‿･｀)<br/>
24時間コンテスト系はきついですが、また似たようなの参戦しましょう。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[golangの環境構築]]></title>
    <link href="http://mono0926.github.io/blog/2014/05/13/golang/"/>
    <updated>2014-05-13T03:23:00+09:00</updated>
    <id>http://mono0926.github.io/blog/2014/05/13/golang</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/GoCon/GoCon/blob/master/2014spring.rst">GoCon/2014spring.rst at master · GoCon/GoCon</a>に備えて、とりあえずgolangのセットアップと、暇なときに<a href="http://tour.golang.org/#1">A Tour of Go</a>をやっておこうかと(　´･‿･｀)</p>

<h2>gvmセットアップ</h2>

<p><a href="https://github.com/moovweb/gvm">moovweb/gvm</a>に書いてある通りにやった。
mercurialのインストールが必要だったので、Brewfileに追記しておいた。</p>

<p>あと、<code>gvm install go1</code>に失敗したので、<a href="https://github.com/moovweb/gvm/issues/38#issuecomment-39842170">Issues on OSX · Issue #38 · moovweb/gvm</a>に書いてある対応で何とかなった。</p>

<p>普通に<code>brew install go</code>のが楽だけど、ちょっとがんばった（´-ω-｀）</p>

<!-- more -->


<h2>実行</h2>

<p>以下を実行。</p>

<p>```
package main
import &ldquo;fmt&rdquo;
func main() {</p>

<pre><code>fmt.Printf("Hello world!")
</code></pre>

<p>}
```</p>

<p><a href="http://mono0926.com/blog/2014/05/06/renew/">OSXの開発環境を整えた &ndash; monoHub</a>でJetBrainのIDEいくつかインストールしてたけど、<a href="http://www.jetbrains.com/idea/">IntelliJ IDEA — The Best Java and Polyglot IDE</a>で全部包含してるのね、情弱つらたん（´-ω-｀）</p>

<p>まあそこそこのお値段だし、適当に色々試用して、良かったら最終的にUltimate Edtion買おうかな（´-ω-｀）
Web StormでもGoのプラグインインストール出来たけど、SDKの設定とかうまく出来なかったりぐぐったりして出た説明と違うからCommunity Edition版のIntelliJでやった。</p>

<p>実行できたけど、<code>go build hoge.go</code>で生成されるような実行ファイルが生成出来なくて謎(　´･‿･｀)<br/>
GOROOT・GOPATHもどこで設定すべきかとかその役割とかよく分からなくてつらたん（´-ω-｀）</p>

<h3>解決</h3>

<ul>
<li><a href="https://github.com/go-lang-plugin-org/go-lang-idea-plugin/blob/master/Missing%20ENV.md">go-lang-idea-plugin/Missing ENV.md at master · go-lang-plugin-org/go-lang-idea-plugin</a>を参考に設定したら、警告ダイアログが出なくなった。</li>
<li>Run Configurationsで、Build before runにチェックを付けてディレクトリをbinに設定したら、実行ファイルも生成されるようになった。</li>
</ul>


<p><img src="/images/post/go.png" alt="go" /></p>

<p>ただ、多分IntelliJがGoのデバッグ実行に対応していない？(無反応)のがつらたん（´-ω-｀）
<a href="https://github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/25">Support for debugging · Issue #25 · go-lang-plugin-org/go-lang-idea-plugin</a>を見ると、GAEプロジェクトのみ対応？？よく分からない（´-ω-｀）</p>

<p>あと、<a href="https://twitter.com/yabuchin_y">ıɥɔınʎ (yabuchin_y) on Twitter</a>さんに<a href="https://gophercasts.io/">GopherCasts</a>を教えてもらった(　´･‿･｀)</p>
]]></content>
  </entry>
  
</feed>
